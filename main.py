import streamlit as st

# --- 初始化数据库和默认提示词 ---
# 必须在页面配置之后导入，以避免与Streamlit的页面配置冲突
from utils.database import db_manager

# 初始化默认提示词
db_manager.init_default_prompts()

# --- 页面配置 (必须是第一个Streamlit命令) ---
st.set_page_config(
    page_title="Saga - 您的专家智囊",
    page_icon="🧠",  # 可以换成喜欢的emoji或图片URL
    layout="wide",   # 'centered' 或 'wide'
    initial_sidebar_state="expanded"
)

# --- 主页内容 ---
st.title("欢迎使用 Saga 🧠")
st.markdown("##### ——— 您的专属 AI 专家智囊")

st.divider()

st.markdown(
    """
    **您好！**

    我是 **Saga**，一个为您量身定制的个人知识助手。我被设计用来协助您处理日常工作、激发创意、并安全、持久地管理您的专业知识。

    ---
    #### **快速开始**

    您可以通过左侧的导航栏开始使用我的核心功能：

    | 图标 | 页面         | 功能简介                                                     |
    |:---:|:-----------|:-----------------------------------------------------------|
    | 💬 | **智能对话**   | 与我进行多轮对话，我能基于Token预算管理上下文，并支持在对话中上传临时文件。     |
    | 📚 | **知识库**     | 上传并管理您的个人文档，构建可供我随时检索和推理的知识体系。 |
    | 📊 | **上下文管理** | 监控和管理对话的上下文摘要，确保长期对话的连贯性。          |
    | 🎭 | **角色提示词** | 自定义和管理系统的角色提示词，适配不同领域的专业需求。      |
    | ⚙️ | **系统设置**   | 配置和切换LLM服务模式（内网、外网、本地），管理API密钥等。          |

    *   **强烈建议您首先检查 `⚙️ 系统设置`**，确保当前的LLM服务配置符合您的网络环境和需求。

    ---

    我已准备就绪，随时可以为您服务。
    """
)

st.sidebar.success("在上方选择一个功能页面开始使用。")
